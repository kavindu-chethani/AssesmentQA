"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdpStoragesProvider = void 0;
const get_active_client_1 = require("./utils/get-active-client");
const base_1 = require("../test-run/storages/base");
class CdpStoragesProvider extends base_1.StoragesProviderBase {
    async _getCdpClient() {
        const browserConnection = this.testRun.browserConnection;
        return (0, get_active_client_1.getActiveClient)(browserConnection);
    }
    async clearStorages() {
        const client = await this._getCdpClient();
        await client.Storage.clearDataForOrigin({ origin: '*', storageTypes: 'all' });
    }
}
exports.CdpStoragesProvider = CdpStoragesProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZXMtcHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcHJveHlsZXNzL3N0b3JhZ2VzLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLGlFQUE0RDtBQUM1RCxvREFBbUY7QUFFbkYsTUFBYSxtQkFBb0IsU0FBUSwyQkFBb0I7SUFDakQsS0FBSyxDQUFDLGFBQWE7UUFDdkIsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBRXpELE9BQU8sSUFBQSxtQ0FBZSxFQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELEtBQUssQ0FBQyxhQUFhO1FBQ2YsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFMUMsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNsRixDQUFDO0NBQ0o7QUFaRCxrREFZQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZW1vdGVDaHJvbWUgZnJvbSAnY2hyb21lLXJlbW90ZS1pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlQ2xpZW50IH0gZnJvbSAnLi91dGlscy9nZXQtYWN0aXZlLWNsaWVudCc7XG5pbXBvcnQgeyBTdG9yYWdlc1Byb3ZpZGVyLCBTdG9yYWdlc1Byb3ZpZGVyQmFzZSB9IGZyb20gJy4uL3Rlc3QtcnVuL3N0b3JhZ2VzL2Jhc2UnO1xuXG5leHBvcnQgY2xhc3MgQ2RwU3RvcmFnZXNQcm92aWRlciBleHRlbmRzIFN0b3JhZ2VzUHJvdmlkZXJCYXNlIGltcGxlbWVudHMgU3RvcmFnZXNQcm92aWRlciB7XG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0Q2RwQ2xpZW50ICgpOiBQcm9taXNlPHJlbW90ZUNocm9tZS5Qcm90b2NvbEFwaT4ge1xuICAgICAgICBjb25zdCBicm93c2VyQ29ubmVjdGlvbiA9IHRoaXMudGVzdFJ1bi5icm93c2VyQ29ubmVjdGlvbjtcblxuICAgICAgICByZXR1cm4gZ2V0QWN0aXZlQ2xpZW50KGJyb3dzZXJDb25uZWN0aW9uKTtcbiAgICB9XG5cbiAgICBhc3luYyBjbGVhclN0b3JhZ2VzICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5fZ2V0Q2RwQ2xpZW50KCk7XG5cbiAgICAgICAgYXdhaXQgY2xpZW50LlN0b3JhZ2UuY2xlYXJEYXRhRm9yT3JpZ2luKHsgb3JpZ2luOiAnKicsIHN0b3JhZ2VUeXBlczogJ2FsbCcgfSk7XG4gICAgfVxufVxuIl19
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringifyHeaderValues = exports.fromBase64String = exports.toBase64String = exports.getResponseAsBuffer = exports.getResponseAsString = void 0;
function getResponseAsString(response) {
    return response.base64Encoded
        ? Buffer.from(response.body, 'base64').toString()
        : response.body;
}
exports.getResponseAsString = getResponseAsString;
function getResponseAsBuffer(response) {
    return response.base64Encoded
        ? Buffer.from(response.body, 'base64')
        : Buffer.from(response.body);
}
exports.getResponseAsBuffer = getResponseAsBuffer;
function toBase64String(str) {
    return Buffer.from(str).toString('base64');
}
exports.toBase64String = toBase64String;
function fromBase64String(str) {
    return Buffer.from(str, 'base64');
}
exports.fromBase64String = fromBase64String;
function stringifyHeaderValues(headers) {
    return headers.map(({ name, value }) => {
        if (typeof value !== 'string')
            value = value.toString ? value.toString() : String(value);
        return { name, value };
    });
}
exports.stringifyHeaderValues = stringifyHeaderValues;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyaW5nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Byb3h5bGVzcy91dGlscy9zdHJpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBSUEsU0FBZ0IsbUJBQW1CLENBQUUsUUFBaUM7SUFDbEUsT0FBTyxRQUFRLENBQUMsYUFBYTtRQUN6QixDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLFFBQVEsRUFBRTtRQUNqRCxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztBQUN4QixDQUFDO0FBSkQsa0RBSUM7QUFFRCxTQUFnQixtQkFBbUIsQ0FBRSxRQUFpQztJQUNsRSxPQUFPLFFBQVEsQ0FBQyxhQUFhO1FBQ3pCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBSkQsa0RBSUM7QUFFRCxTQUFnQixjQUFjLENBQUUsR0FBVztJQUN2QyxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLENBQUM7QUFGRCx3Q0FFQztBQUVELFNBQWdCLGdCQUFnQixDQUFFLEdBQVc7SUFDekMsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBRkQsNENBRUM7QUFFRCxTQUFnQixxQkFBcUIsQ0FBRSxPQUE4QjtJQUNqRSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1FBQ25DLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUTtZQUN6QixLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFOUQsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUMzQixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFQRCxzREFPQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm90b2NvbCBmcm9tICdkZXZ0b29scy1wcm90b2NvbCc7XG5pbXBvcnQgR2V0UmVzcG9uc2VCb2R5UmVzcG9uc2UgPSBQcm90b2NvbC5OZXR3b3JrLkdldFJlc3BvbnNlQm9keVJlc3BvbnNlO1xuaW1wb3J0IEhlYWRlckVudHJ5ID0gUHJvdG9jb2wuRmV0Y2guSGVhZGVyRW50cnk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXNwb25zZUFzU3RyaW5nIChyZXNwb25zZTogR2V0UmVzcG9uc2VCb2R5UmVzcG9uc2UpOiBzdHJpbmcge1xuICAgIHJldHVybiByZXNwb25zZS5iYXNlNjRFbmNvZGVkXG4gICAgICAgID8gQnVmZmVyLmZyb20ocmVzcG9uc2UuYm9keSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKClcbiAgICAgICAgOiByZXNwb25zZS5ib2R5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVzcG9uc2VBc0J1ZmZlciAocmVzcG9uc2U6IEdldFJlc3BvbnNlQm9keVJlc3BvbnNlKTogQnVmZmVyIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuYmFzZTY0RW5jb2RlZFxuICAgICAgICA/IEJ1ZmZlci5mcm9tKHJlc3BvbnNlLmJvZHksICdiYXNlNjQnKVxuICAgICAgICA6IEJ1ZmZlci5mcm9tKHJlc3BvbnNlLmJvZHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9CYXNlNjRTdHJpbmcgKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oc3RyKS50b1N0cmluZygnYmFzZTY0Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQmFzZTY0U3RyaW5nIChzdHI6IHN0cmluZyk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0ciwgJ2Jhc2U2NCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5SGVhZGVyVmFsdWVzIChoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10pOiBIZWFkZXJFbnRyeVtdIHtcbiAgICByZXR1cm4gaGVhZGVycy5tYXAoKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcgPyB2YWx1ZS50b1N0cmluZygpIDogU3RyaW5nKHZhbHVlKTtcblxuICAgICAgICByZXR1cm4geyBuYW1lLCB2YWx1ZSB9O1xuICAgIH0pO1xufVxuXG4iXX0=